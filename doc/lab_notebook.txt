Lab Notebook

2015-08-22 raxml_pthreads on rbcL_broad. job started, but ran out of time (1 day limit).

2015-08-22 examl_batch on rbcL_broad. finished.

2015-08-25 examl_batch on rbcL_broad (removed V. speciosa bad seq). Submitted, never started.

2015-08-25 r8s on three different nexus files in interactive mode. Get errors from r8s each time.

2015-08-26 create pathd8 folder. can't get it to run yet.

2015-08-26 update rbcL_broad.phy alignment: removed bad seqs including Vandenboschia speciosa and Polypodium vulgare. keep backup of old rbcL_broad.phy as rbcL_broad.phy.OLD

2015-08-26 raxml_pthreads on rbcL_broad (new version). increase number of nodes from 10 to 16, mem from 20,000 to 32,000 mb (2,000 mb per node), amount of processing time from 1d to 7d. change to general partition. first run interactive to test.
FAILED. For some reason, original rbcL_broad.phy was missing from data folder. try again...

2015-08-30 same as above - raxml_pthreads on rbcL_broad (new version). put rbcL_broad.phy back in data folder, trying again. Note - now keeping all scripts in bin/ and calling from date directory in bin (don't copy into bin/date folder)

2015-08-31  Added new blast.sh script to bin, added trnHpsbA trimmed library fasta file and unknown gameto seqs to data.
created blast id library for trnHpsbA
ran blast on clean gameto trnHpsbA

2015-09-01 Running digital rads (interactive) again (ran out of time last time). 
run in "~/Analysis/drad/2015-09-01" (not in "moorea", which has git repository)
keep a copy of digitalrads.sh script and the final output file only in "~/Analysis/moorea/bin/2015-09-01"

2015-09-03 digital rads failed (ran out of time). Talked with Jeff, turns out Ceratopteris genome has nearly 1 million contigs, which was producing way too many files.
Jeff rewrote script so that it takes fasta with seqs on one line each, doesn't make all those files. Try again with this version later.
Ran blast.sh on rbcL data. Needed to reformat input gameto fasta because a few seqs had (JNG1086, JNG 1087) had ? instead of n.
Eventually get digital rads script to work using new version of python script.

2015-09-09 created blast db using ceratopteris draft genome. Run digitalrads_blast.sh using radtags produced by digitalrads.py. Next, need to parse this output with R script to find how many radtags hit multiple contigs.

2015-09-28 installed PATHd8 locally in bin folder. Ran PATHd8 on rbcL_broad following pathd8_interactive.sh.

2015-10-02 get PATHd8 working normally (have to use new module system). Run PATHd8 on rbcL_broad with lycophytes trimmed
Also run on rbcL_broad, no lycophytes, no node names

2015-10-04 ran remote blast on "no fern match" sequences from R script

2015-10-09 Setting up PHLAWD. First step is to download GenBank plant database. Ran phlawd_db.sh on bin/2015-10-09/db.setup
Note that db is saved outside of Moorea git repo (in ~/Analysis/genbank)
Ran out of time during interactive session

2015-10-10 Run PHLAWD set up again using batch script phlawd_db.sh
Get error that I've exceeded disk space usage (39 Gb)

2015-10-11 Try to delete some old folders to free up disk space
Analysis/drad (old digital rads output that has way too many small files)
rm -R taking way too long! only succeeded in deleting partially. Need help.

(note: successfully deleted old drad folder that was taking up too much space)

2015-11-25 finally got phlawd database installed at /n/regal/informatics_public/apps/phlawd/pln.db
Tried to run using Chuck's config file, but only got 400 taxa back. Need to fix.

2015-11-27 Chuck's rbcL alignment was bad. Remade with my own sequences, ran again using lab node ("davis"). This time worked, get 4000 taxa. Delete temporary working file created by phlawd because it's too big for github (>100 mb).

2015-11-28 run phlawd on atpA, atpB, remove temp files

2015-11-29 run FastTree on rbcL phlawd alignment (after removing bad seqs and adding outgroup), atpA and atpB

2015-11-30 run phlawd on matk, mafft on rbcL, atpA, atpB

2015-12-01 run phalwd on matK, fasttree on all_broad

2015-12-02 run examl, fasttree, raxml, mafft, and phlawd. as of 2015-12-15, raxml 100 bootstrap STILL hasn't finished, will probably run out of time.

2015-12-03 run fasttree on rbcL_all

2015-12-08 run BLAST workflow

2015-12-15 run BLAST workflow. run mafft on new rbcL alignment, concatenate, run fasttree.

2015-12-17 run pathD8 on fasttree results. remove problematic Serpocaulon_triseriale rbcL seq from alignment, run examl again

2015-12-18 run treePL on fasttree results three times. Run with "prime" first to determine parameters.
treepl1 = ran with lambda = 100. Branch lengths look too long, very similar across the tree.
treepl2 = ran with lambda = 10. Looks better.
treepl3 = try cross validation (no need to specify lambda since we're testing different values). CV.out shows that lambda = 0.1 gives lowest chi-squared error, so we should use this one.

2015-12-20 run treepl on fasttree results again. First run "thorough" and "prime" with lambda = 0.1

2015-12-21 treepl1: run treepl on fasttree after trimming out OTUs with short branchlengths - get much better results! treepl2: run cross-validation on trimmed fasttree tree

2015-12-22 treepl1: cross validation indicates smoothing parameter of 0.01 is optimal, so run with "prime" option on this. treepl2: run with smooth = 0.01, results from prime on trimmed fasttree

2015-12-23 run raxml on all_broad, after fixing Serpocaulon triseriale. Time was set to 4 days... timed out with one ML tree left to go!

2015-12-27 run raxml AGAIN on all_broad. Set n cores to 8 following raxml manual (ca. 4000 alignment patterns / 500 = 8 cores). Set maxtime to 7 days.

2015-12-28 setting n cores to 8 was apparently a bad idea.. first ML search took 15 hours! (instead of ca. 5). Kill job, start again with reduced alignment and back to n=16 cores.

2015-12-29 test out examl_bootstrap script on moorea only rbcL dataset. seems to work.
run raxml (20 best likelihood trees search) on all_broad. Finished by 2016-01-03.

2016-01-03 added all output folders (2015*, 2016*) to .gitignore. Only track scripts from now on.
treepl1: run treepl on raxml 2015-12-29 tree to determine which taxa have short branchlengths and need to be trimmed.
treepl2: run treepl on raxml 2015-12-29 tree to determine rate smoothing parameter (from 0.0001 to 1,000)
treepl3: run treepl with priming option
treepl4: final treepl run with optimal rate smoothing and parameters indicated by priming run

2016-01-04 testing examl_bootstrap script
examl_boot_test1: test on low number of reps for all_broad dataset
examl_boot_test2: test on 100 reps for rbcL test dataset (rename to "all_broad" for testing purposes)
